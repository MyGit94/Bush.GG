<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>

    <!-- css -->
    <th:block th:replace="common/fragments/config :: configFragment" />
    <link rel="stylesheet" href="/css/register.css">
</head>

<body>

    <div class="container">

        <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
                <!-- Nested Row within Card Body -->
                <div class="row">
                    <div class="col-lg-5 d-none d-lg-block bg-register-image">
                        <img src="/img/member/register.jpg" alt="">
                    </div>
                    <div class="col-lg-7">
                        <div class="p-5">
                            <div class="text-center">
                                <h1 class="h4 text-gray-900 mb-4">회원가입</h1>
                            </div>
                            <div th:if="${successMessage}" class="alert alert-success">
    							<span th:text="${successMessage}"></span>
							</div>

                            <!-- 개인정보 입력 전체영역 -->
						    <!-- 아이디&닉네임 끝 -->
                           <form class="user" method="post" action="/member/register" th:action="@{/member/register}" th:object="${memberDTO}">
                            
                               <!-- 아이디 -->
                               <div class="form-group row">
                                <div class="col-sm-6 mb-3 mb-sm-0">
                                    <input type="text" class="form-control form-control-user"
                                    	th:field="*{loginId}" th:errorclass="text-danger" placeholder="아이디">
									<div class="errors">
										<div>
											<p th:class="error" th:errors="*{loginId}">입력 오류메시지</p>
											<!-- 아이디 중복 체크 결과 표시 -->
											<p th:class="error" th:text="${loginIdError}" th:style="${loginIdError} ? 'margin: 0.35rem 0rem 0rem' : 'margin: 0' ">중복체크</p>
										</div>
	                               </div>
                                </div> 
                                
                                <!-- 닉네임 -->
                                <div class="col-sm-6">
                                    <input type="text" class="form-control form-control-user"
                                    	th:field="*{nickName}" placeholder="닉네임">
                                    <div class="errors">
                                   		<div>
                                    		<p class="error" th:errors="*{nickName}">입력 오류메시지</p>
                                    	</div>
                                	</div>
                                </div>
                            </div>
                             <!-- 아이디&닉네임 끝 -->

                                <!-- 이메일 -->
                                <div class="form-group">
                                    <input type="email" class="form-control form-control-user"
                                    	th:field="*{email}" placeholder="이메일">
                                    <div class="errors">
                                   		<div>
                                    		<p class="error" th:errors="*{email}">입력 오류메시지</p>
                                    	</div>
                                	</div>
                                </div>
                                <!-- 이메일 끝 -->

                                <!-- 비밀번호 -->
                                <div class="form-group row">
                                    <!-- 비밀번호 -->
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <input type="password" class="form-control form-control-user"
                                            th:field="*{passwd}"placeholder="비밀번호">
                                       <div class="errors">
                                 		   <div>
                                        		<p class="error" th:errors="*{passwd}">입력 오류메시지</p>
                                        	</div>
                                    	</div>
                                    </div>

                                    <!-- 비밀번호 확인 -->
                                    <div class="col-sm-6">
                                        <input type="password" class="form-control form-control-user"
                                            th:field="*{passwd}" placeholder="비밀번호 확인">
                                        <div class="errors">
                                       		 <div>
                                       			<p class="error" th:errors="*{passwd}">입력 오류메시지</p>
                                       		</div> 
                                  		</div>
                                    </div>
                                </div>
                                <!-- 비밀번호 끝 -->

                                <!-- 회원가입 버튼 -->
                                <input type="submit" value="회원가입" th:value="#{member.button.register}" class="btn reigserBtn">
                                
                                <!-- 구분선 -->
                                <hr>

                                <!-- 구글 회원가입 버튼 -->
                                <a href="index.html" class="btn googleBtn">
                                    <i class="fab fa-google fa-fw"></i> Google로 회원가입
                                </a>

                            </form>
                            <!-- 개인정보 입력 전체영역 끝 -->
                            <!-- 구분선 -->
                            <hr>

                            <!-- 로그인하기 -->
                            <div class="text-center">
                                <a class="login_bushgg" th:href="@{/member/login}">이미 계정이 있나요? 로그인!</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
       <!--   자바 스크립트 -->
    <th:block th:replace="common/fragments/script :: scriptFragment"/>
    
<script>
    $(document).ready(function() {
        // 중복 체크 버튼 클릭 이벤트
        $("#checkDuplicateButton").click(function() {
            var loginId = $("#loginId").val();
            if (!loginId) {
                $("#loginIdError").text("아이디를 입력하세요.");
                return;
            }
            
            // 중복 체크 요청
            $.get("/member/api/check-duplicate-loginid/" + loginId, function(data) {
                if (data.isDuplicate) {
                    $("#loginIdError").text("이미 사용 중인 아이디입니다.");
                } else {
                    $("#loginIdError").text("사용 가능한 아이디입니다.");
                }
            });
        });
    });
</script>

</body>


</html>